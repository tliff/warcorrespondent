#!/usr/bin/env ruby

begin
  require 'warcorrespondent'
rescue LoadError
  $:.unshift File.expand_path( '../../lib', __FILE__ )
  require 'warcorrespondent'
end

require 'daemons'

if !WarCorrespondent::config_file
  WarCorrespondent::Installer::install
  exit
end

if WarCorrespondent::config_file
  Daemons.run_proc('warcorrespondent.rb') do
    WarCorrespondent::setup
    WarCorrespondent::run
  end
else
  puts "Could not find config file although it should have been installed."
  puts "Maybe you should try it manually, see documentation."
  puts "I'm bailing out now..."
end

